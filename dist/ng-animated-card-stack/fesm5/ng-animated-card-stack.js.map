{"version":3,"file":"ng-animated-card-stack.js.map","sources":["ng://ng-animated-card-stack/lib/services/animated-stack.service.ts","ng://ng-animated-card-stack/lib/components/animated-card/animated-card.component.ts","ng://ng-animated-card-stack/lib/components/animated-stack/animated-stack.component.ts","ng://ng-animated-card-stack/lib/animated-card-stack.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { Subject, of } from 'rxjs';\r\nimport { delay, tap } from 'rxjs/operators';\r\n\r\n@Injectable()\r\nexport class AnimatedStackService {\r\n  private _destroy$ = new Subject<string>();\r\n  destroy$ = this._destroy$.asObservable();\r\n  private _destroyed$ = new Subject<string>();\r\n  destroyed$ = this._destroyed$.asObservable();\r\n\r\n  constructor() { }\r\n\r\n  destroy(id: string, delayTime: number) {\r\n    this._destroy$.next(id);\r\n    return of(id).pipe(\r\n      delay(delayTime),\r\n      tap(_ => this._destroyed$.next(id))\r\n    );\r\n  }\r\n}\r\n","import { AfterViewInit, ChangeDetectionStrategy, Component, ElementRef, Input, Renderer2 } from '@angular/core';\r\nimport { AnimatedStackService } from '../../services/animated-stack.service';\r\n\r\n\r\n@Component({\r\n  selector: 'x-animated-card',\r\n  templateUrl: './animated-card.component.html',\r\n  styleUrls: ['./animated-card.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class AnimatedCardComponent implements AfterViewInit {\r\n  /** index of the item in the list */\r\n  @Input() id: string;\r\n  delay = 400;\r\n  deleted: boolean;\r\n\r\n  constructor(\r\n    private stackSrv: AnimatedStackService,\r\n    private elemRef: ElementRef,\r\n    private renderer: Renderer2\r\n  ) { }\r\n\r\n  ngAfterViewInit() {\r\n    this.renderer.setStyle(this.elemRef.nativeElement, 'transition', `${this.delay}ms transform`);\r\n  }\r\n\r\n  destroy() {\r\n    this.renderer.setStyle(this.elemRef.nativeElement, 'visibility', 'hidden');\r\n    return this.stackSrv.destroy(this.id, this.delay);\r\n  }\r\n\r\n  getPosition() {\r\n    return (this.elemRef.nativeElement as HTMLElement).getBoundingClientRect();\r\n  }\r\n\r\n  getElement() {\r\n    return this.elemRef.nativeElement;\r\n  }\r\n\r\n}\r\n","import {\r\n  AfterViewInit,\r\n  ChangeDetectionStrategy,\r\n  Component,\r\n  ContentChildren,\r\n  ElementRef,\r\n  QueryList,\r\n  Renderer2,\r\n} from '@angular/core';\r\nimport { AnimatedCardComponent } from '../animated-card/animated-card.component';\r\nimport { AnimatedStackService } from '../../services/animated-stack.service';\r\n\r\n/**\r\n * animated component ðð±âðð¢ð¥ð¥\r\n */\r\n@Component({\r\n  selector: 'x-animated-stack',\r\n  templateUrl: './animated-stack.component.html',\r\n  styleUrls: ['./animated-stack.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  providers: [AnimatedStackService]\r\n})\r\nexport class AnimatedStackComponent implements AfterViewInit {\r\n  @ContentChildren(AnimatedCardComponent) cards: QueryList<AnimatedCardComponent>;\r\n\r\n  constructor(\r\n    private stackSrv: AnimatedStackService,\r\n    private renderer: Renderer2,\r\n    private elemRef: ElementRef\r\n  ) { }\r\n\r\n  ngAfterViewInit() {\r\n    // when a card has been destroyed we get its index\r\n    this.stackSrv.destroy$.subscribe(id => {\r\n      // getting the non deleted elements\r\n      const cardArray = this.cards.map(card => card)\r\n        .filter(card => !card.deleted);\r\n      const index = cardArray.findIndex(card => card.id === id);\r\n      for (let i = index + 1; i < cardArray.length; i++) {\r\n        // we now need to modify next card\r\n        const card = cardArray[i];\r\n        const lastCoords = cardArray[i - 1].getPosition();\r\n        const currentCoords = card.getPosition();\r\n        this.applyTranslation(card.getElement(), lastCoords, currentCoords);\r\n      }\r\n    });\r\n\r\n    // we need to reset the translation after changes\r\n    this.stackSrv.destroyed$.subscribe(id => {\r\n      const cardArray = this.cards.map(card => card);\r\n      const index = cardArray.findIndex(card => card.id === id);\r\n      const deletedCard = cardArray[index];\r\n      const cardElem = deletedCard.getElement();\r\n      deletedCard.deleted = true;\r\n      this.renderer.setStyle(cardElem, 'display', 'none');\r\n\r\n      for (let i = index + 1; i < cardArray.length; i++) {\r\n        // we reset styles\r\n        const nextElem = cardArray[i].getElement();\r\n        this.renderer.setStyle(nextElem, 'transform', 'none');\r\n        this.renderer.setStyle(nextElem, 'transition', 'none');\r\n      }\r\n    });\r\n  }\r\n\r\n  applyTranslation(elem, lastCoords, currentCoords) {\r\n    const dx = lastCoords.x - currentCoords.x;\r\n    const dy = lastCoords.y - currentCoords.y;\r\n    this.renderer.setStyle(elem, 'transition', '300ms transform');\r\n    this.renderer.setStyle(elem, 'transform', `translate3d(${dx}px, ${dy}px, 0)`);\r\n  }\r\n\r\n}\r\n\r\n","import { NgModule } from '@angular/core';\nimport { AnimatedStackComponent } from './components/animated-stack/animated-stack.component';\nimport { AnimatedCardComponent } from './components/animated-card/animated-card.component';\n\n@NgModule({\n  imports: [],\n  declarations: [AnimatedStackComponent, AnimatedCardComponent],\n  exports: [AnimatedStackComponent, AnimatedCardComponent]\n})\nexport class AnimatedCardStackModule { }\n"],"names":[],"mappings":"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"}
